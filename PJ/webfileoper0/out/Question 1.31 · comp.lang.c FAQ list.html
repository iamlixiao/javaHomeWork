<!DOCTYPE HTML PUBLIC "-//W3O//DTD W3 HTML 2.0//EN"><!-- This collection of hypertext pages is Copyright 1995-2005 by Steve Summit. --><!-- Content from the book "C Programming FAQs: Frequently Asked Questions" --><!-- (Addison-Wesley, 1995, ISBN 0-201-84519-9) is made available here by --><!-- permission of the author and the publisher as a service to the community. --><!-- It is intended to complement the use of the published text --><!-- and is protected by international copyright laws. --><!-- The on-line content may be accessed freely for personal use --><!-- but may not be published or retransmitted without explicit permission. --><!-- --><!-- this page built Sat Dec 24 21:47:45 2005 by faqproc version 2.7 --><!-- from source file init.sgml dated Fri Jul  2 21:52:44 2004 --><!-- corresponding to FAQ list version 4.0 --><html><head><meta name=GENERATOR content="faqproc"><title>Question 1.31</title><link href="initval.html" rev=precedes><link href="fcninit.html" rel=precedes><link href="index.html" rev=subdocument></head><body bgcolor="#ffffff"><p><!-- qbegin --><p><font face=Helvetica size=8 color=blue><b>Q:</b></font>This code, straight out of a book, isn't compiling:<pre>int f(){	char a[] = "Hello, world!";}</pre></p><p><hr><p><font face=Helvetica size=8 color=blue><b>A:</b></font>Perhaps you havean old,pre-ANSI compiler,which doesn't allow initialization of ``automatic aggregates''(i.e. non-<TT>static</TT> local arrays, structures,orunions).You have four possible workarounds:<OL><li>Ifthe array won't be written toor ifyou won't need a fresh copyduringanysubsequent calls,you can declare it <TT>static</TT>(or perhaps make it global).<li>Ifthe array won't be written to,you couldreplace it with a pointer:<pre>	f()	{		char *a = "Hello, world!";	}</pre>Youcan always initialize local <TT>char&nbsp;*</TT> variablesto point tostring literals(butsee question<a href="strlitinit.html">1.32</a>).<li>If neither ofthe aboveconditions hold,you'll have toinitializethe arrayby handwith <TT>strcpy</TT>whenthe functionis called:<pre>	f()	{		char a[14];		strcpy(a, "Hello, world!");	}</pre><li>Get an ANSI-compatible compiler.</OL></p><p>See also question<a href="../ansi/preansi.html">11.29a</a>.</p><!-- aend --><p><hr>