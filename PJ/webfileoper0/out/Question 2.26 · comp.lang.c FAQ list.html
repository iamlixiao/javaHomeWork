<!DOCTYPE HTML PUBLIC "-//W3O//DTD W3 HTML 2.0//EN"><!-- This collection of hypertext pages is Copyright 1995-2005 by Steve Summit. --><!-- Content from the book "C Programming FAQs: Frequently Asked Questions" --><!-- (Addison-Wesley, 1995, ISBN 0-201-84519-9) is made available here by --><!-- permission of the author and the publisher as a service to the community. --><!-- It is intended to complement the use of the published text --><!-- and is protected by international copyright laws. --><!-- The on-line content may be accessed freely for personal use --><!-- but may not be published or retransmitted without explicit permission. --><!-- --><!-- this page built Sat Dec 24 21:47:45 2005 by faqproc version 2.7 --><!-- from source file struct.sgml dated Wed Dec 21 16:15:32 2005 --><!-- corresponding to FAQ list version 4.0 --><html><head><meta name=GENERATOR content="faqproc"><title>Question 2.26</title><link href="bitfield0.html" rev=precedes><link href="../expr/evalorder1.html" rel=precedes><link href="index.html" rev=subdocument></head><body bgcolor="#ffffff"><p><!-- qbegin --><p><font face=Helvetica size=8 color=blue><b>Q:</b></font>Why do people use explicit masks andbit-twiddlingcode so much,instead of declaring bit-fields?</p><p><hr><p><font face=Helvetica size=8 color=blue><b>A:</b></font>Bit-fields are thought to be nonportable,although they are no less portablethan other parts of the language.(You don't know how big they can be,but that's equally true for values of type <TT>int</TT>.You don't know by default whether they're signed,but that's equally true of type <TT>char</TT>.You don't knowwhether they're laid out from left to right or right to left in memory,but that's equally true of the bytesof <em>all</em> types,and only matters if you're trying toconform to externally-imposed storage layouts,which is always nonportable;see also questions<a href="padding.html">2.12</a> and<a href="../misc/binaryfiles.html">20.5</a>.)</p><p>Bit-fields are inconvenientwhen you also want to be able tomanipulate some collection of bits as a whole(perhaps to copy a set of flags).You can't have arrays of bit-fields;see also question <a href="../misc/bitsets.html">20.8</a>.Many programmers suspect that the compiler won't generate goodcode for bit-fields (historically, this was sometimes true).</p><p>Straightforward code usingbit-fields is certainly clearerthan the equivalent explicit masking instructions;it's too badthatbit-fields can't be used more often.</p><!-- aend --><p><hr>