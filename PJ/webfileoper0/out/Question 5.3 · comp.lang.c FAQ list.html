<!DOCTYPE HTML PUBLIC "-//W3O//DTD W3 HTML 2.0//EN"><!-- This collection of hypertext pages is Copyright 1995-2005 by Steve Summit. --><!-- Content from the book "C Programming FAQs: Frequently Asked Questions" --><!-- (Addison-Wesley, 1995, ISBN 0-201-84519-9) is made available here by --><!-- permission of the author and the publisher as a service to the community. --><!-- It is intended to complement the use of the published text --><!-- and is protected by international copyright laws. --><!-- The on-line content may be accessed freely for personal use --><!-- but may not be published or retransmitted without explicit permission. --><!-- --><!-- this page built Sat Dec 24 21:47:45 2005 by faqproc version 2.7 --><!-- from source file null.sgml dated Wed Dec 21 13:03:25 2005 --><!-- corresponding to FAQ list version 4.0 --><html><head><meta name=GENERATOR content="faqproc"><title>Question 5.3</title><link href="null2.html" rev=precedes><link href="macro.html" rel=precedes><link href="index.html" rev=subdocument></head><body bgcolor="#ffffff"><p><!-- qbegin --><p><font face=Helvetica size=8 color=blue><b>Q:</b></font>Is the abbreviated pointer comparison ``<TT>if(p)</TT>'' to test fornon-null pointers valid?What if the internal representation for null pointers is nonzero?</p><p><hr><p><font face=Helvetica size=8 color=blue><b>A:</b></font>It is always valid.</p><p>When C requires the Booleanvalue of an expression,a false value isinferredwhen the expression comparesequal to zero, and a true value otherwise.That is, wheneverone writes<pre>	if(expr)</pre>where``expr''is any expression at all, the compileressentially acts as if it had been written as<pre>	if((expr) != 0)</pre>Substituting the trivial pointer expression``p''for``expr'',we have<pre>	if(p)	is equivalent to	if(p != 0)</pre>and this is a comparison context, so the compiler can tellthat the (implicit) <TT>0</TT> is actually a null pointer constant,anduse the correct null pointer value.There is no trickery involved here;compilers do work this way,and generate identical code for both constructs.The internal representation of a null pointer does<em>not</em>matter.</p><p>The boolean negation operator, <TT>!</TT>, can be describedas follows:<pre>	!expr	is essentially equivalent to	(expr)?0:1		or to	((expr) == 0)</pre>which leads to the conclusion that<pre>	if(!p)	is equivalent to	if(p == 0)</pre></p><p>``Abbreviations'' such as <TT>if(p)</TT>,though perfectly legal<a href="assertptr.html" rel=subdocument>[footnote]</a>,are considered by some to be bad style(and by others to be good style;see question <a href="../style/stylewars.html">17.10</a>).</p><p>See also question<a href="../bool/bool2.html">9.2</a>.</p><p>References:K&amp;R2 Sec. A7.4.7 p. 204<br>ISO Sec. 6.3.3.3, Sec. 6.3.9, Sec. 6.3.13, Sec. 6.3.14, Sec. 6.3.15, Sec. 6.6.4.1, Sec. 6.6.5<br>H&amp;S Sec. 5.3.2 p. 122<br></p><!-- aend --><p><hr>