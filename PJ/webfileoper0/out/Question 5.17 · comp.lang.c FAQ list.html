<!DOCTYPE HTML PUBLIC "-//W3O//DTD W3 HTML 2.0//EN"><!-- This collection of hypertext pages is Copyright 1995-2005 by Steve Summit. --><!-- Content from the book "C Programming FAQs: Frequently Asked Questions" --><!-- (Addison-Wesley, 1995, ISBN 0-201-84519-9) is made available here by --><!-- permission of the author and the publisher as a service to the community. --><!-- It is intended to complement the use of the published text --><!-- and is protected by international copyright laws. --><!-- The on-line content may be accessed freely for personal use --><!-- but may not be published or retransmitted without explicit permission. --><!-- --><!-- this page built Sat Dec 24 21:47:45 2005 by faqproc version 2.7 --><!-- from source file null.sgml dated Wed Dec 21 13:03:25 2005 --><!-- corresponding to FAQ list version 4.0 --><html><head><meta name=GENERATOR content="faqproc"><title>Question 5.17</title><link href="confusion4.html" rev=precedes><link href="runtime0.html" rel=precedes><link href="index.html" rev=subdocument></head><body bgcolor="#ffffff"><p><!-- qbegin --><p><font face=Helvetica size=8 color=blue><b>Q:</b></font>Seriously, have any actual machines really used nonzero nullpointers,or different representations for pointers to different types?</p><p><hr><p><font face=Helvetica size=8 color=blue><b>A:</b></font>The Prime50 seriesused segment 07777, offset 0 for the null pointer,at least for PL/I.Later models used segment 0, offset 0 for null pointers in C,necessitating new instructions such as TCNP (Test C Null Pointer),evidentlyas a sop to<a href="sop.html" rel=subdocument>[footnote]</a>all the extant poorly-written C code which madeincorrect assumptions.Older, word-addressed Primemachineswere also notorious for requiring largerbyte pointers (<TT>char&nbsp;*</TT>'s)than word pointers (<TT>int&nbsp;*</TT>'s).</p><p>TheEclipse MV seriesfrom Data General has three architecturallysupported pointer formats (word, byte, and bit pointers),two of which are used by C compilers:byte pointers for <TT>char&nbsp;*</TT> and <TT>void&nbsp;*</TT>,and word pointers for everything else.For historical reasons during the evolutionof the 32-bit MV line from the 16-bit Nova line,word pointers and byte pointershad the offset, indirection, and ring protection bitsin different places in the word.Passing a mismatched pointer format to a functionresulted in protection faults.Eventually, the MV C compiler added many compatibility optionsto try to deal with code that had pointer type mismatch errors.</p><p>Some <TT>Honeywell-Bull</TT> mainframes usethe bit pattern 06000 for (internal) null pointers.</p><p>The CDC Cyber 180 Series has 48-bit pointersconsisting of a ring, segment, and offset.Most users (in ring 11) have null pointers of 0xB00000000000.It was common on old CDC ones-complement machinesto use an all-one-bits word as a special flag for all kinds of data,including invalid addresses.</p><p>The old HP&nbsp;3000seriesuses a different addressing scheme for byte addressesthan for word addresses;like several of the machines aboveit therefore uses different representationsfor <TT>char&nbsp;*</TT> and <TT>void&nbsp;*</TT> pointersthan for other pointers.</p><p>The Symbolics Lisp Machine, a tagged architecture,does not even have conventional numeric pointers;it uses the pair <TT>&lt;NIL,&nbsp;0&gt;</TT>(basically a nonexistent <TT>&lt;</TT>object,&nbsp;offset<TT>&gt;</TT> handle)as a C null pointer.</p><p>Depending on the``memory model'' in use,8086-familyprocessors (PC compatibles) may use16-bit data pointersand32-bit function pointers,or vice versa.</p><p>Some 64-bit Cray machines represent <TT>int&nbsp;*</TT>in the lower 48 bits of a word;<TT>char&nbsp;*</TT> additionally usessome ofthe upper 16 bits to indicatea byte address within a word.</p><p>Additional links:A<a href="wierdptrs.ct.html">message from Chris Torek</a>with more details about some of these machines.</p><p>References:K&amp;R1 Sec. A14.4 p. 211<br></p><!-- aend --><p><hr>