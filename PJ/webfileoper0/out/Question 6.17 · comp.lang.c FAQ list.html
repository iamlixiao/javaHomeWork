<!DOCTYPE HTML PUBLIC "-//W3O//DTD W3 HTML 2.0//EN"><!-- This collection of hypertext pages is Copyright 1995-2005 by Steve Summit. --><!-- Content from the book "C Programming FAQs: Frequently Asked Questions" --><!-- (Addison-Wesley, 1995, ISBN 0-201-84519-9) is made available here by --><!-- permission of the author and the publisher as a service to the community. --><!-- It is intended to complement the use of the published text --><!-- and is protected by international copyright laws. --><!-- The on-line content may be accessed freely for personal use --><!-- but may not be published or retransmitted without explicit permission. --><!-- --><!-- this page built Sat Dec 24 21:47:45 2005 by faqproc version 2.7 --><!-- from source file aryptr.sgml dated Wed Dec 21 12:50:38 2005 --><!-- corresponding to FAQ list version 4.0 --><html><head><meta name=GENERATOR content="faqproc"><title>Question 6.17</title><link href="dynmuldimary.html" rev=precedes><link href="pass2dary.html" rel=precedes><link href="index.html" rev=subdocument></head><body bgcolor="#ffffff"><p><!-- qbegin --><p><font face=Helvetica size=8 color=blue><b>Q:</b></font>Here's a neat trick: if I write<pre>	int realarray[10];	int *array = &amp;realarray[-1];</pre>I can treat <TT>array</TT> as if it were a 1-based array.</p><p><hr><p><font face=Helvetica size=8 color=blue><b>A:</b></font>Although this technique is attractive(and was used inold editionsofthe book<I>Numerical Recipes in C</I>),it is not strictly conforming to the C Standard.Pointer arithmeticis definedonly as long as the pointer pointswithin the same allocated block of memory,or to the imaginary ``terminating'' elementone past it;otherwise,the behavior is undefined,<em>even if the pointer is not dereferenced</em>.The code abovecomputes a pointer to memory before the beginning of <TT>realarray</TT>andcould fail if,while subtracting the offset,an illegaladdress were generated(perhaps because the address triedto ``wrap around''past the beginning of some memory segment).</p><p>Additional links:<a href="Virginia.html" rel=subdocument>&ldquo;Yes, Virginia&rdquo;</a></p><p>References:K&amp;R2 Sec. 5.3 p. 100, Sec. 5.4 pp. 102-3, Sec. A7.7 pp. 205-6<br>ISO Sec. 6.3.6<br>Rationale Sec. 3.2.2.3<br></p><!-- aend --><p><hr>